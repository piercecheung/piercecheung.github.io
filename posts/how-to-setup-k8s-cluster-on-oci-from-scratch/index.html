<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Setup a K8S Cluster on OCI from scratch - Part 1 | Mindsmining</title>
<meta name=keywords content="Kubernetes,K8S,kubeadm,OCI"><meta name=description content="Part 1: Setup a Kubernetes Cluster Control Plane on OCI"><meta name=author content="Pierce Zhang"><link rel=canonical href=https://blog.mindsmining.com/posts/how-to-setup-k8s-cluster-on-oci-from-scratch/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.mindsmining.com/images/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.mindsmining.com/images/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.mindsmining.com/images/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.mindsmining.com/images/favicon/apple-touch-icon.png><link rel=mask-icon href=https://blog.mindsmining.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.mindsmining.com/posts/how-to-setup-k8s-cluster-on-oci-from-scratch/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Setup a K8S Cluster on OCI from scratch - Part 1"><meta property="og:description" content="Part 1: Setup a Kubernetes Cluster Control Plane on OCI"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.mindsmining.com/posts/how-to-setup-k8s-cluster-on-oci-from-scratch/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-19T19:36:00-08:00"><meta property="article:modified_time" content="2023-02-19T19:36:00-08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setup a K8S Cluster on OCI from scratch - Part 1"><meta name=twitter:description content="Part 1: Setup a Kubernetes Cluster Control Plane on OCI"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.mindsmining.com/posts/"},{"@type":"ListItem","position":2,"name":"Setup a K8S Cluster on OCI from scratch - Part 1","item":"https://blog.mindsmining.com/posts/how-to-setup-k8s-cluster-on-oci-from-scratch/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Setup a K8S Cluster on OCI from scratch - Part 1","name":"Setup a K8S Cluster on OCI from scratch - Part 1","description":"Part 1: Setup a Kubernetes Cluster Control Plane on OCI","keywords":["Kubernetes","K8S","kubeadm","OCI"],"articleBody":"Recently I made a dicision to pursue Cloud Native Stack and start to developing on Kubernetes Clusters for my projects. So I started to learn how to setup a Kubernetes Cluster for developing purpose on Oracle Cloud Infrastructure (OCI) from scratch. The reason why I choose OCI is it‚Äôs has a free tier and I just need to setup a cluster on it for development and testing.\nAnd also I want to do Kubernetes in a more hands-on way, so I choose to use kubeadm to setup the cluster, from scratch.\nHere are the steps.\nüìù Note: This series of articles is intend to have a hands-on experience on Kubernetes, so I will not go into details of the concepts of Kubernetes. If you want to know more about Kubernetes, please refer to the Kubernetes official documentation.\nPart 1: Setup a Kubernetes Cluster Control Plane on OCI Plan and preparations According to the Kubernetes official documentation, the minimum requirements for a Kubernetes cluster are:\nA compatible Linux host. The Kubernetes project provides generic instructions for Linux distributions based on Debian and Red Hat, and those distributions without a package manager. 2 GB or more of RAM per machine (any less will leave little room for your apps). 2 CPUs or more. Full network connectivity between all machines in the cluster (public or private network is fine). Unique hostname, MAC address, and product_uuid for every node. See here for more details. Certain ports are open on your machines. See here for more details. Swap disabled. You MUST disable swap in order for the kubelet to work properly. So we will use a VM instance with 2 OCPU and 8 GB RAM on OCI to setup the Kubernetes cluster‚Äôs control plane (master node).\nOpen Ports in iptables For a virtual machine instance on OCI, all the requirements are met except the network connectivity part, as in the OCI platform the virtual machine is using iptables not the normal ufw firewall to control the network traffic. So we need to make some changes to the iptables rules to make the network traffic work properly.\nAccording to the Kubernetes official documentation, the following ports are required to be open for the control plane:\nProtocol Direction Port Range Purpose Used By TCP Inbound 6443* Kubernetes API server All TCP Inbound 2379-2380 etcd server client API kube-apiserver, etcd TCP Inbound 10250 Kubelet API Self, Control plane TCP Inbound 10259 kube-scheduler Self TCP Inbound 10257 kube-controller-manager Self After we have created a virtual machine instance on OCI, we can use the following commands to open the required ports:\nsudo iptables -I INPUT 6 -m state --state NEW -p tcp --dport 6443 -j ACCEPT sudo iptables -I INPUT 6 -m state --state NEW -p tcp --dport 2379:2380 -j ACCEPT sudo iptables -I INPUT 6 -m state --state NEW -p tcp --dport 10250 -j ACCEPT sudo iptables -I INPUT 6 -m state --state NEW -p tcp --dport 10259 -j ACCEPT sudo iptables -I INPUT 6 -m state --state NEW -p tcp --dport 10257 -j ACCEPT To make the changes permanent:\nsudo netfilter-persistent save We can also use the following command to check the status of the iptables rules:\nsudo iptables -L The following is the output of the command related our changes:\nACCEPT tcp -- anywhere anywhere state NEW tcp dpt:10257 ACCEPT tcp -- anywhere anywhere state NEW tcp dpt:10259 ACCEPT tcp -- anywhere anywhere state NEW tcp dpt:10250 ACCEPT tcp -- anywhere anywhere state NEW tcp dpts:2379:2380 ACCEPT tcp -- anywhere anywhere state NEW tcp dpt:6443 Add Ingress Rules in the Security List of VCN The last step is to config the Ingress Rulls in the Security List of the virtual machine‚Äôs VCN. We can follow the OCI official documentation to do that. We need to add the following rules:\nStateless Source IP Protocal Source Port Range Destination Port Range Allows Description No 0.0.0.0/0 TCP All 6443 TCP traffic for ports: 6443 Kubernetes API server Install Container Runtime Refer the Kubernetes official documentation, there are several container runtimes that can be used with Kubernetes, including Docker, containerd, CRI-O, we choose to use containerd as the container runtime.\nInstall and config prerequisites Forwarding IPv4 and letting iptables see bridged traffic Execute the following commands to let br_netfilter and overlay modules to be loaded:\ncat \u003c","wordCount":"1597","inLanguage":"en","datePublished":"2023-02-19T19:36:00-08:00","dateModified":"2023-02-19T19:36:00-08:00","author":{"@type":"Person","name":"Pierce Zhang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.mindsmining.com/posts/how-to-setup-k8s-cluster-on-oci-from-scratch/"},"publisher":{"@type":"Organization","name":"Mindsmining","logo":{"@type":"ImageObject","url":"https://blog.mindsmining.com/images/favicon/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.mindsmining.com/ accesskey=h title="Mindsmining (Alt + H)">Mindsmining</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://blog.mindsmining.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://blog.mindsmining.com/languages/ title=Languages><span>Languages</span></a></li><li><a href=https://blog.mindsmining.com/techstacks/ title=TechStacks><span>TechStacks</span></a></li><li><a href=https://blog.mindsmining.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.mindsmining.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.mindsmining.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.mindsmining.com/>Home</a>&nbsp;¬ª&nbsp;<a href=https://blog.mindsmining.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Setup a K8S Cluster on OCI from scratch - Part 1</h1><div class=post-meta><span title='2023-02-19 19:36:00 -0800 -0800'>February 19, 2023</span>&nbsp;¬∑&nbsp;8 min&nbsp;¬∑&nbsp;Pierce Zhang</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#part-1-setup-a-kubernetes-cluster-control-plane-on-oci aria-label="Part 1: Setup a Kubernetes Cluster Control Plane on OCI">Part 1: Setup a Kubernetes Cluster Control Plane on OCI</a><ul><li><a href=#plan-and-preparations aria-label="Plan and preparations">Plan and preparations</a><ul><li><a href=#open-ports-in-iptables aria-label="Open Ports in iptables">Open Ports in iptables</a></li><li><a href=#add-ingress-rules-in-the-security-list-of-vcn aria-label="Add Ingress Rules in the Security List of VCN">Add Ingress Rules in the Security List of VCN</a></li></ul></li><li><a href=#install-container-runtime aria-label="Install Container Runtime">Install Container Runtime</a><ul><li><a href=#install-and-config-prerequisites aria-label="Install and config prerequisites">Install and config prerequisites</a><ul><li><a href=#forwarding-ipv4-and-letting-iptables-see-bridged-traffic aria-label="Forwarding IPv4 and letting iptables see bridged traffic">Forwarding IPv4 and letting iptables see bridged traffic</a></li></ul></li><li><a href=#install-containerd aria-label="Install containerd">Install containerd</a></li><li><a href=#install-runc aria-label="Install runc">Install runc</a></li><li><a href=#install-cni-plugins aria-label="Install CNI plugins">Install CNI plugins</a></li><li><a href=#setup-containerd-for-kubernetes aria-label="Setup containerd for Kubernetes">Setup containerd for Kubernetes</a></li></ul></li><li><a href=#install-kubeadm aria-label="Install kubeadm">Install kubeadm</a></li><li><a href=#initialize-the-master-node-with-config-file aria-label="Initialize the master node with config file">Initialize the master node with config file</a></li><li><a href=#install-pod-network-add-on aria-label="Install pod network add-on">Install pod network add-on</a></li><li><a href=#use-kubectl-on-local-machine-to-connect-to-the-cluster aria-label="Use kubectl on local machine to connect to the cluster">Use kubectl on local machine to connect to the cluster</a></li><li><a href=#next-step aria-label="Next step">Next step</a></li></ul></li></ul></div></details></div><div class=post-content><p>Recently I made a dicision to pursue Cloud Native Stack and start to developing on Kubernetes Clusters for my projects. So I started to learn how to setup a Kubernetes Cluster for developing purpose on Oracle Cloud Infrastructure (OCI) from scratch. The reason why I choose OCI is it&rsquo;s has a free tier and I just need to setup a cluster on it for development and testing.</p><p>And also I want to do Kubernetes in a more hands-on way, so I choose to use <code>kubeadm</code> to setup the cluster, from scratch.</p><p>Here are the steps.</p><blockquote><p>&#x1f4dd; <strong>Note:</strong> This series of articles is intend to have a hands-on experience on Kubernetes, so I will not go into details of the concepts of Kubernetes. If you want to know more about Kubernetes, please refer to the <a href=https://kubernetes.io/docs/home/>Kubernetes official documentation</a>.</p></blockquote><hr><h2 id=part-1-setup-a-kubernetes-cluster-control-plane-on-oci>Part 1: Setup a Kubernetes Cluster Control Plane on OCI<a hidden class=anchor aria-hidden=true href=#part-1-setup-a-kubernetes-cluster-control-plane-on-oci>#</a></h2><h3 id=plan-and-preparations>Plan and preparations<a hidden class=anchor aria-hidden=true href=#plan-and-preparations>#</a></h3><p>According to the <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/>Kubernetes official documentation</a>, the minimum requirements for a Kubernetes cluster are:</p><blockquote><ul><li>A compatible Linux host. The Kubernetes project provides generic instructions for Linux distributions based on Debian and Red Hat, and those distributions without a package manager.</li><li>2 GB or more of RAM per machine (any less will leave little room for your apps).</li><li>2 CPUs or more.</li><li>Full network connectivity between all machines in the cluster (public or private network is fine).</li><li>Unique hostname, MAC address, and product_uuid for every node. See <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#verify-mac-address>here</a> for more details.</li><li>Certain ports are open on your machines. See <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#check-required-ports>here</a> for more details.</li><li>Swap disabled. You MUST disable swap in order for the kubelet to work properly.</li></ul></blockquote><p>So we will use a VM instance with 2 OCPU and 8 GB RAM on OCI to setup the Kubernetes cluster&rsquo;s control plane (master node).</p><hr><h4 id=open-ports-in-iptables>Open Ports in iptables<a hidden class=anchor aria-hidden=true href=#open-ports-in-iptables>#</a></h4><p>For a virtual machine instance on OCI, all the requirements are met except the network connectivity part, as in the OCI platform the virtual machine is using iptables not the normal ufw firewall to control the network traffic. So we need to make some changes to the iptables rules to make the network traffic work properly.</p><p>According to the <a href=https://kubernetes.io/docs/reference/networking/ports-and-protocols/>Kubernetes official documentation</a>, the following ports are required to be open for the control plane:</p><table><thead><tr><th>Protocol</th><th>Direction</th><th>Port Range</th><th>Purpose</th><th>Used By</th></tr></thead><tbody><tr><td>TCP</td><td>Inbound</td><td>6443*</td><td>Kubernetes API server</td><td>All</td></tr><tr><td>TCP</td><td>Inbound</td><td>2379-2380</td><td>etcd server client API</td><td>kube-apiserver, etcd</td></tr><tr><td>TCP</td><td>Inbound</td><td>10250</td><td>Kubelet API</td><td>Self, Control plane</td></tr><tr><td>TCP</td><td>Inbound</td><td>10259</td><td>kube-scheduler</td><td>Self</td></tr><tr><td>TCP</td><td>Inbound</td><td>10257</td><td>kube-controller-manager</td><td>Self</td></tr></tbody></table><p>After we have created a virtual machine instance on OCI, we can use the following commands to open the required ports:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo iptables -I INPUT <span style=color:#ae81ff>6</span> -m state --state NEW -p tcp --dport <span style=color:#ae81ff>6443</span> -j ACCEPT
</span></span><span style=display:flex><span>sudo iptables -I INPUT <span style=color:#ae81ff>6</span> -m state --state NEW -p tcp --dport 2379:2380 -j ACCEPT
</span></span><span style=display:flex><span>sudo iptables -I INPUT <span style=color:#ae81ff>6</span> -m state --state NEW -p tcp --dport <span style=color:#ae81ff>10250</span> -j ACCEPT
</span></span><span style=display:flex><span>sudo iptables -I INPUT <span style=color:#ae81ff>6</span> -m state --state NEW -p tcp --dport <span style=color:#ae81ff>10259</span> -j ACCEPT
</span></span><span style=display:flex><span>sudo iptables -I INPUT <span style=color:#ae81ff>6</span> -m state --state NEW -p tcp --dport <span style=color:#ae81ff>10257</span> -j ACCEPT
</span></span></code></pre></div><p>To make the changes permanent:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo netfilter-persistent save
</span></span></code></pre></div><p>We can also use the following command to check the status of the iptables rules:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo iptables -L
</span></span></code></pre></div><p>The following is the output of the command related our changes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpt:10257
</span></span><span style=display:flex><span>ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpt:10259
</span></span><span style=display:flex><span>ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpt:10250
</span></span><span style=display:flex><span>ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpts:2379:2380
</span></span><span style=display:flex><span>ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpt:6443
</span></span></code></pre></div><hr><h4 id=add-ingress-rules-in-the-security-list-of-vcn>Add Ingress Rules in the Security List of VCN<a hidden class=anchor aria-hidden=true href=#add-ingress-rules-in-the-security-list-of-vcn>#</a></h4><p>The last step is to config the Ingress Rulls in the Security List of the virtual machine&rsquo;s VCN. We can follow the <a href=https://docs.oracle.com/en-us/iaas/mysql-database/doc/adding-ingress-rules1.html>OCI official documentation</a> to do that. We need to add the following rules:</p><table><thead><tr><th>Stateless</th><th>Source</th><th>IP Protocal</th><th>Source Port Range</th><th>Destination Port Range</th><th>Allows</th><th>Description</th></tr></thead><tbody><tr><td>No</td><td>0.0.0.0/0</td><td>TCP</td><td>All</td><td>6443</td><td>TCP traffic for ports: 6443</td><td>Kubernetes API server</td></tr></tbody></table><hr><h3 id=install-container-runtime>Install Container Runtime<a hidden class=anchor aria-hidden=true href=#install-container-runtime>#</a></h3><p>Refer the <a href=https://kubernetes.io/docs/setup/production-environment/container-runtimes/>Kubernetes official documentation</a>, there are several container runtimes that can be used with Kubernetes, including Docker, containerd, CRI-O, we choose to use containerd as the container runtime.</p><hr><h4 id=install-and-config-prerequisites>Install and config prerequisites<a hidden class=anchor aria-hidden=true href=#install-and-config-prerequisites>#</a></h4><h5 id=forwarding-ipv4-and-letting-iptables-see-bridged-traffic>Forwarding IPv4 and letting iptables see bridged traffic<a hidden class=anchor aria-hidden=true href=#forwarding-ipv4-and-letting-iptables-see-bridged-traffic>#</a></h5><p>Execute the following commands to let <code>br_netfilter</code> and <code>overlay</code> modules to be loaded:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>overlay
</span></span></span><span style=display:flex><span><span style=color:#e6db74>br_netfilter
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo modprobe overlay
</span></span><span style=display:flex><span>sudo modprobe br_netfilter
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># sysctl params required by setup, params persist across reboots</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>net.bridge.bridge-nf-call-iptables  = 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>net.bridge.bridge-nf-call-ip6tables = 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>net.ipv4.ip_forward                 = 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Apply sysctl params without reboot</span>
</span></span><span style=display:flex><span>sudo sysctl --system
</span></span></code></pre></div><p>Verify that the <code>br_netfilter</code>, <code>overlay</code> modules are loaded by running below instructions:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>lsmod | grep br_netfilter
</span></span><span style=display:flex><span>lsmod | grep overlay
</span></span></code></pre></div><p>Verify that the <code>net.bridge.bridge-nf-call-iptables</code>, <code>net.bridge.bridge-nf-call-ip6tables</code>, <code>net.ipv4.ip_forward</code> system variables are set to 1 in the sysctl config by running below instruction:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sysctl net.bridge.bridge-nf-call-iptables net.bridge.bridge-nf-call-ip6tables net.ipv4.ip_forward
</span></span></code></pre></div><hr><h4 id=install-containerd>Install containerd<a hidden class=anchor aria-hidden=true href=#install-containerd>#</a></h4><p>The installation steps are from the <a href=https://github.com/containerd/containerd/blob/main/docs/getting-started.md>containerd official documentation</a>.</p><p>First of all, Download the <code>containerd-&lt;VERSION>-&lt;OS>-&lt;ARCH>.tar.gz</code> archive from <a href=https://github.com/containerd/containerd/releases>here</a>.</p><p>For example if we are using Ubuntu 20.04 on arm64, we need to download the <code>containerd-1.6.15-linux-arm64.tar.gz</code> archive.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo wget https://github.com/containerd/containerd/releases/download/v1.6.15/containerd-1.6.15-linux-arm64.tar.gz
</span></span><span style=display:flex><span>sudo tar Cxzvf /usr/local containerd-1.6.15-linux-arm64.tar.gz 
</span></span><span style=display:flex><span>sudo wget https://raw.githubusercontent.com/containerd/containerd/main/containerd.service
</span></span><span style=display:flex><span>sudo cp containerd.service /usr/local/lib/systemd/system/
</span></span><span style=display:flex><span>sudo systemctl daemon-reload
</span></span><span style=display:flex><span>sudo systemctl enable --now containerd
</span></span></code></pre></div><p>Confirm the service via:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo systemctl status containerd
</span></span></code></pre></div><hr><h4 id=install-runc>Install runc<a hidden class=anchor aria-hidden=true href=#install-runc>#</a></h4><p>Download the <code>runc.&lt;ARCH></code> binary from <a href=https://github.com/opencontainers/runc/releases>here</a>.</p><p>For example we are using Ubuntu 20.04 on arm64, so we need to download the <code>runc.arm64</code> binary.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo wget https://github.com/opencontainers/runc/releases/download/v1.1.4/runc.arm64
</span></span><span style=display:flex><span>sudo install -m <span style=color:#ae81ff>755</span> runc.arm64 /usr/local/sbin/runc
</span></span></code></pre></div><hr><h4 id=install-cni-plugins>Install CNI plugins<a hidden class=anchor aria-hidden=true href=#install-cni-plugins>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo wget https://github.com/containernetworking/plugins/releases/download/v1.2.0/cni-plugins-linux-arm64-v1.2.0.tgz
</span></span><span style=display:flex><span>sudo mkdir -p /opt/cni/bin
</span></span><span style=display:flex><span>sudo tar Cxzvf /opt/cni/bin cni-plugins-linux-arm64-v1.2.0.tgz
</span></span></code></pre></div><hr><h4 id=setup-containerd-for-kubernetes>Setup containerd for Kubernetes<a hidden class=anchor aria-hidden=true href=#setup-containerd-for-kubernetes>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># Create the containerd config file directory</span>
</span></span><span style=display:flex><span>sudo mkdir -p /etc/containerd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create the containerd config file</span>
</span></span><span style=display:flex><span>sudo su
</span></span><span style=display:flex><span>containerd config default &gt; /etc/containerd/config.toml
</span></span><span style=display:flex><span>exit
</span></span></code></pre></div><p>Edit the <code>/etc/containerd/config.toml</code> file and set the <code>SystemdCgroup</code> to <code>true</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#34;io.containerd.grpc.v1.cri&#34;</span>.<span style=color:#a6e22e>containerd</span>.<span style=color:#a6e22e>runtimes</span>.<span style=color:#a6e22e>runc</span>]
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#34;io.containerd.grpc.v1.cri&#34;</span>.<span style=color:#a6e22e>containerd</span>.<span style=color:#a6e22e>runtimes</span>.<span style=color:#a6e22e>runc</span>.<span style=color:#a6e22e>options</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>SystemdCgroup</span> = <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><p>Restart the containerd service:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo systemctl restart containerd
</span></span></code></pre></div><hr><h3 id=install-kubeadm>Install kubeadm<a hidden class=anchor aria-hidden=true href=#install-kubeadm>#</a></h3><p>Refer the <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/>Kubernetes official documentation</a>, install kubeadm, kubelet and kubectl.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install -y apt-transport-https ca-certificates curl
</span></span><span style=display:flex><span>sudo curl -fsSLo /etc/apt/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
</span></span><span style=display:flex><span>sudo echo <span style=color:#e6db74>&#34;deb [signed-by=/etc/apt/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main&#34;</span> | sudo tee /etc/apt/sources.list.d/kubernetes.list
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install -y kubelet kubeadm kubectl
</span></span><span style=display:flex><span>sudo apt-mark hold kubelet kubeadm kubectl
</span></span></code></pre></div><blockquote><p>&#x1f4dd; <strong>Note:</strong> According to <a href=https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/configure-cgroup-driver/#configuring-the-kubelet-cgroup-driver>Kubernetes official documentation</a>, the cgroup driver used by kubelet must match the container runtime and kubelet. But for kubernetes version higher than 1.22, if not setting cgroupDriver in kubeletconfiguration field, then systemd will be set, so no need to edit the kubeadm-config.yaml. This can be verified with <code>sudo nano /var/lib/kubelet/config.yaml</code> that <code>cgroupDriver</code> has been already set to systemd.</p></blockquote><p>Execute the following command to check the cgroup driver used by kubelet:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>nano /var/lib/kubelet/config.yaml
</span></span></code></pre></div><p>We can find that the <code>cgroupDriver</code> has been already set to systemd:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>kubelet.config.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#f92672>cgroupDriver</span>: <span style=color:#ae81ff>systemd</span>
</span></span></code></pre></div><hr><h3 id=initialize-the-master-node-with-config-file>Initialize the master node with config file<a hidden class=anchor aria-hidden=true href=#initialize-the-master-node-with-config-file>#</a></h3><p>Some config need to be setup before initializing the master node:</p><ul><li><code>clusterName</code>: the name of the cluster</li><li><code>podSubnet</code>: the subnet used by pods</li><li><code>certSANs</code>: the IP address or DNS need to be added to the api server certificate</li></ul><p>So let us create an <code>init-config.yaml</code> file with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>kubeadm.k8s.io/v1beta3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ClusterConfiguration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>networking</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>podSubnet</span>: <span style=color:#e6db74>&#34;192.168.0.0/16&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiServer</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>certSANs</span>:
</span></span><span style=display:flex><span>    - <span style=color:#e6db74>&#34;myapiserverip or myapiserverdns&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>clusterName</span>: <span style=color:#e6db74>&#34;myclustername&#34;</span>
</span></span></code></pre></div><p>Then use the <code>kubeadm init</code> command with the <code>--config</code> flag to initialize the master node:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo kubeadm init --config init-config.yaml
</span></span></code></pre></div><p>After the initialization, the output will show the command to join the worker nodes to the cluster:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>Your Kubernetes control-plane has initialized successfully!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>To start using your cluster, you need to run the following as a regular user:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  mkdir -p $HOME/.kube
</span></span><span style=display:flex><span>  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
</span></span><span style=display:flex><span>  sudo chown <span style=color:#66d9ef>$(</span>id -u<span style=color:#66d9ef>)</span>:<span style=color:#66d9ef>$(</span>id -g<span style=color:#66d9ef>)</span> $HOME/.kube/config
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>You should now deploy a Pod network to the cluster.
</span></span><span style=display:flex><span>Run <span style=color:#e6db74>&#34;kubectl apply -f [podnetwork].yaml&#34;</span> with one of the options listed at:
</span></span><span style=display:flex><span>  /docs/concepts/cluster-administration/addons/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>You can now join any number of machines by running the following on each node
</span></span><span style=display:flex><span>as root:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  kubeadm join &lt;control-plane-host&gt;:&lt;control-plane-port&gt; --token &lt;token&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt; 
</span></span></code></pre></div><p>As intructed in the output, run the following commands to setup the kubeconfig:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>mkdir -p $HOME/.kube
</span></span><span style=display:flex><span>sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
</span></span><span style=display:flex><span>sudo chown <span style=color:#66d9ef>$(</span>id -u<span style=color:#66d9ef>)</span>:<span style=color:#66d9ef>$(</span>id -g<span style=color:#66d9ef>)</span> $HOME/.kube/config
</span></span></code></pre></div><p>Now we can using <code>kubectl</code> to manage the cluster from the master node:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>kubectl get nodes
</span></span></code></pre></div><hr><h3 id=install-pod-network-add-on>Install pod network add-on<a hidden class=anchor aria-hidden=true href=#install-pod-network-add-on>#</a></h3><p>Refer the <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#pod-network>Kubernetes official documentation</a>, we must deploy a Container Network Interface (CNI) based Pod network add-on so that the Pods can communicate with each other. Cluster DNS (CoreDNS) will not start up before a network is installed.</p><p>See a list of add-ons that implement the <a href=https://kubernetes.io/docs/concepts/cluster-administration/networking/#how-to-implement-the-kubernetes-networking-model>Kubernetes networking model</a>.</p><p>For this time we choose <a href=https://projectcalico.docs.tigera.io/about/about-calico>calico</a> as the pod network add-on. Execute the following command to install calico:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>curl https://raw.githubusercontent.com/projectcalico/calico/v3.25.0/manifests/calico.yaml -O
</span></span><span style=display:flex><span>kubectl apply -f calico.yaml
</span></span></code></pre></div><p>After installing the pod network add-on, we can verify the status of the pods:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>kubectl get pods --all-namespaces
</span></span></code></pre></div><hr><h3 id=use-kubectl-on-local-machine-to-connect-to-the-cluster>Use kubectl on local machine to connect to the cluster<a hidden class=anchor aria-hidden=true href=#use-kubectl-on-local-machine-to-connect-to-the-cluster>#</a></h3><p>As we initialized the master node with the certSANs, we can use the master node&rsquo;s kubeconfig file to connect to the cluster from local machine.</p><p>Using the following command to get the kubeconfig file from the master node:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>kubectl config view --minify --flatten
</span></span></code></pre></div><p>Copy the content of the output and save it to a file named <code>config</code> in the <code>~/.kube</code> directory on your local machine (asuume the local machine is a Linux or MacOS machine):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>mkdir -p $HOME/.kube
</span></span><span style=display:flex><span>nano $HOME/.kube/config
</span></span></code></pre></div><p>Then we can use the <code>kubectl</code> command to connect to the cluster from local machine:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>kubectl get nodes
</span></span></code></pre></div><hr><h3 id=next-step>Next step<a hidden class=anchor aria-hidden=true href=#next-step>#</a></h3><p>After all the steps above, we have a kubernetes cluster with one master node. Next setp is to add worker nodes to the cluster.</p><p>We will continue this part in the next post.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.mindsmining.com/tags/kubernetes/>Kubernetes</a></li><li><a href=https://blog.mindsmining.com/tags/k8s/>K8S</a></li><li><a href=https://blog.mindsmining.com/tags/kubeadm/>Kubeadm</a></li><li><a href=https://blog.mindsmining.com/tags/oci/>OCI</a></li></ul><nav class=paginav><a class=next href=https://blog.mindsmining.com/posts/how-to-make-a-flask-python-multiligual-website/><span class=title>Next ¬ª</span><br><span>Make a Flask Python Website Multilingual</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Setup a K8S Cluster on OCI from scratch - Part 1 on x" href="https://x.com/intent/tweet/?text=Setup%20a%20K8S%20Cluster%20on%20OCI%20from%20scratch%20-%20Part%201&amp;url=https%3a%2f%2fblog.mindsmining.com%2fposts%2fhow-to-setup-k8s-cluster-on-oci-from-scratch%2f&amp;hashtags=Kubernetes%2cK8S%2ckubeadm%2cOCI"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setup a K8S Cluster on OCI from scratch - Part 1 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.mindsmining.com%2fposts%2fhow-to-setup-k8s-cluster-on-oci-from-scratch%2f&amp;title=Setup%20a%20K8S%20Cluster%20on%20OCI%20from%20scratch%20-%20Part%201&amp;summary=Setup%20a%20K8S%20Cluster%20on%20OCI%20from%20scratch%20-%20Part%201&amp;source=https%3a%2f%2fblog.mindsmining.com%2fposts%2fhow-to-setup-k8s-cluster-on-oci-from-scratch%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setup a K8S Cluster on OCI from scratch - Part 1 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.mindsmining.com%2fposts%2fhow-to-setup-k8s-cluster-on-oci-from-scratch%2f&title=Setup%20a%20K8S%20Cluster%20on%20OCI%20from%20scratch%20-%20Part%201"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setup a K8S Cluster on OCI from scratch - Part 1 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.mindsmining.com%2fposts%2fhow-to-setup-k8s-cluster-on-oci-from-scratch%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setup a K8S Cluster on OCI from scratch - Part 1 on whatsapp" href="https://api.whatsapp.com/send?text=Setup%20a%20K8S%20Cluster%20on%20OCI%20from%20scratch%20-%20Part%201%20-%20https%3a%2f%2fblog.mindsmining.com%2fposts%2fhow-to-setup-k8s-cluster-on-oci-from-scratch%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setup a K8S Cluster on OCI from scratch - Part 1 on telegram" href="https://telegram.me/share/url?text=Setup%20a%20K8S%20Cluster%20on%20OCI%20from%20scratch%20-%20Part%201&amp;url=https%3a%2f%2fblog.mindsmining.com%2fposts%2fhow-to-setup-k8s-cluster-on-oci-from-scratch%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setup a K8S Cluster on OCI from scratch - Part 1 on ycombinator" href="https://news.ycombinator.com/submitlink?t=Setup%20a%20K8S%20Cluster%20on%20OCI%20from%20scratch%20-%20Part%201&u=https%3a%2f%2fblog.mindsmining.com%2fposts%2fhow-to-setup-k8s-cluster-on-oci-from-scratch%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.mindsmining.com/>Mindsmining</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>